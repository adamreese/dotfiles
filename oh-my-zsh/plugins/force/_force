#compdef force
#autoload

# force zsh completion, based on adb completion

local -a _1st_arguments
_1st_arguments=(
'login:Log in to force.com'
'logout:Log out from force.com'
'logins:List force.com logins used'
'active:Show or set the active force.com account'
'whoami:Show information about the active account'
'sobject:Manage standard & custom objects'
'field:Manage sobject fields'
'record:Create, modify, or view records'
'bulk:Load csv file use Bulk API'
'fetch:Export specified artifact(s) to a local directory'
'export:Export metadata to a local directory'
'import:Import metadata from a local directory'
'query:Execute a SOQL statement'
'apex:Execute anonymous Apex code'
'oauth:Manage ConnectedApp credentials'
'version:Display current version'
'update:Update to the latest version'
'help:Show this help'
'push:Deploy single artifact from a local directory'
'password:See password status or reset password'
)

local -a _field_arguments
_field_arguments=(
  'list:List all fields for a sobject'
  'create:Create a field in a sobject'
  'delete:Delete a field in a sobject'
  'import:Import a sobject'
)

local -a _record_arguments
_record_arguments=(
  'get:get <sobject> <id>'
  'create:create <sobject> [<fields>]'
  'update:update <sobject> <id> [<fields>]'
  'delete:delete <sobject> <id>'
)

local -a _sobject_arguments
_sobject_arguments=(
  'list:List all sobjects'
  'describe:Describe a sobject'
  'create:Create new sobject'
  'delete:Delete a sobject'
  'import:Import a sobject'
)

local -a _bulk_arguments
_bulk_arguments=(
  'insert'
  'update'
  'job'
  'batches'
  'batch'
  'query'
)

local expl

_arguments '*:: :->subcmds' && return 0

if (( CURRENT == 1 )); then
  _describe -t commands "force subcommand" _1st_arguments
  return
fi


case "$words[1]" in
  bulk)
    _describe -t commands "force bulk subcommand" _bulk_arguments ;;
  field)
    _describe -t commands "force field subcommand" _field_arguments ;;
  record)
    _describe -t commands "force record subcommand" _record_arguments ;;
  sobject)
    _describe -t commands "force sobject subcommand" _sobject_arguments ;;
  help)
    _describe -t commands "force help subcommand" _1st_arguments ;;
esac
